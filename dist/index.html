<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex,nofollow,noodp" />
    <title>Auto Loan Calculator</title>
</head>
<body>
    <div class="wrapper">
        <header class="pageHeader">
            <h1>Auto Loan Calculator</h1>
        </header>
        <main class="pageMain">
            <section class="userInput">
                <form class="userInputForm" id="inputForm" oninput="updateOutput()">
                    <p><label>Car Price:
                        <span class="dollarSign">$</span><input name="carPrice" id="carPrice" type="number" value="0.00" onchange="updateOutput()" />
                    </label></p>
                    <p><label>Downpayment:
                        <span class="dollarSign">$</span><input name="downPayment" id="downPayment" type="number" value="0.00" onchange="updateOutput()" />
                    </label></p>
                    <p><label class="loanDuration">Loan Duration:
                        <span class="yearsLabel">years</span><input name="years" id="years" type="number" value="12" onchange="updateOutput()" />
                        <span class="monthsLabel">months</span><input name="months" id="months" type="number" value="6" onchange="updateOutput()" />
                    </label></p>
                    <p><label>Interest Rate:
                            <input name="interestRate" id="interestRate" type="number" value="3" onchange="updateOutput()" /><span class="percentSign">%</span>
                        </label></p>
                </form>

            </section>
            <section class="calculations">
                <section class="loanAmounts">
                    <h2>Monthly Payment</h2>
                    <h3 class="outputNums" id="monthlyPayment">
                        <output name="MonthlyPayment" id="monthlyOutput" for="carPrice downPayment years months interestRate" form="inputForm">0</output>
                    </h3>

                    <h2>Total Interest Paid</h2>
                    <h3 class="outputNums" id="totalInterestPaid">
                        <output name="totalInterest" id="interestOutput" for="carPrice downPayment years months interestRate" form="inputForm">0</output>
                    </h3>
                    <button id="btnCalculate">Get Amortization Schedule!</button>
                </section>
                <section class="amortization">
                          
                </section>
                
            </section>
        </main>
        <footer class="pageFooter">
            <p>Â© 2019 by Risa Hall Web Design, Inc. All Rights Reserved. Car Driving Vector by <a href="https://www.vecteezy.com/free-vector/car-driving">Vecteezy</a>.</p>
        </footer>
    </div>
    <script>
        function updateOutput() {
           //Get HTML Elements
           const form = document.getElementById("inputForm");
                let carPrice = parseInt(form.elements["carPrice"].value);
                let downPayment = parseInt(form.elements["downPayment"].value);
                let loanYears = parseInt(form.elements["years"].value);
                let loanMonths = parseInt(form.elements["months"].value);
                let interestRate = parseInt(form.elements["interestRate"].value);

           const monthlyOutput = document.getElementById("monthlyOutput");
           const interestOutput = document.getElementById("interestOutput");

           //Calculate
           /* Monthly Payment Formula:
                monthlyPayment = downPayment 
                * 
                (interest per month (1 + interest per month) * months 
                / 
                (1 + interest per month) ^ months - 1
           */

           //Convert years to months to perform all future calculations based on months
            let loanDuration = parseFloat((loanYears * 12) + loanMonths);
            
            //Get Interest per month - multiply apr by car price and divide by 12
            let intRatePerMonth = (interestRate / 100) / 12;
            let equationTop = Math.pow(intRatePerMonth * (1 + intRatePerMonth), loanDuration);
            let equationBot = Math.pow(1 + intRatePerMonth, loanDuration - 1);
            console.log(equationTop + " is equation top and bottom is " + equationBot);

           monthlyOutput.value = loanDuration;
           interestOutput.value = intRatePerMonth;

        }
    </script>
    <script type="text/javascript" src="main.js"></script></body>
</html>